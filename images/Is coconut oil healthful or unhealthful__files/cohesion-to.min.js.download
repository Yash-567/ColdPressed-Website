!function i(a,s,u){function d(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return d(a[t][1][e]||e)},r,r.exports,i,a,s,u)}return s[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)d(u[e]);return d}({1:[function(e,t,n){t.exports={name:"cohesion-client-js",version:"3.13.1",description:"Cohesion Client libraries",main:"index.js",scripts:{test:"./node_modules/.bin/mocha ./test/*.test.js --reporter spec",build:"./node_modules/.bin/gulp bundle",serve:"python -m SimpleHTTPServer 8888","lint:fix":"eslint --fix src"},repository:{type:"git",url:"git+https://github.com/RedVentures/cohesion-client-js.git"},contributors:["Rich Compton <rcompton@redventures.com>","Ed Mendoza <emendoza@redventures.com>","Austin Eady <aeady@redventures.com>","Bobby Craig <bcraig@redventures.com>","Benji Speer <bspeer@redventures.com>"],license:"ISC",bugs:{url:"https://github.com/RedVentures/cohesion-client-js/issues"},dependencies:{chai:"^4.2.0",ejs:"^2.6.1",express:"^4.16.3",lodash:"^4.17.19","merge-stream":"^1.0.1",mocha:"^5.2.0",puppeteer:"~1.9.0",url:"^0.11.0","vinyl-transform":"^1.0.0"},devDependencies:{"babel-cli":"^6.18.0","babel-plugin-transform-object-rest-spread":"^6.20.2","babel-preset-es2015":"^6.18.0",babelify:"^7.2.0",browserify:"^16.2.3",eslint:"^5.6.1","eslint-config-airbnb":"^17.1.0","eslint-plugin-import":"^2.14.0","eslint-plugin-jsx-a11y":"^6.1.1","eslint-plugin-react":"^7.11.1",glob:"7.1.3",gulp:"3.9.1","gulp-bro":"^1.0.3","gulp-clean":"^0.4.0","gulp-eslint":"5.0.0","gulp-livereload":"^4.0.1","gulp-rename":"^1.4.0","gulp-sourcemaps":"^2.6.4","gulp-streamify":"1.0.2","gulp-tap":"^1.0.1","gulp-uglify":"3.0.1","vinyl-buffer":"^1.0.1","vinyl-source-stream":"^2.0.0"}}},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.tagular;document.body?r(t):document.addEventListener("DOMContentLoaded",function(){r(t)})};var o=e("../../utils");function r(t){var n=(0,o.fetchCookie)("cohsn_xs_id");window.addEventListener("message",function(e){"string"==typeof e.data&&(0===e.data.indexOf("COHESION:XS_ID:")?(n=e.data.substr(15),(0,o.setCookie)("cohsn_xs_id",n),t("beam","CrossSiteIdTracked",{"@type":"redventures.usertracking.v2.CrossSiteIdTracked",crossSiteId:n})):"COHESION:XS_UNSUPPORTED"===e.data&&((0,o.setCookie)("cohsn_xs_id","unsupported"),t("beam","CrossSiteIdUnsupported",{"@type":"redventures.usertracking.v2.CrossSiteIdUnsupported"})))},!1);var e=document.createElement("iframe");e.style.display="none",e.src="https://cdn.cohesionapps.com/cohesion/xs1.html"+(n?"?xsid="+n:""),document.body.appendChild(e)}},{"../../utils":27}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){function e(t,e){if(!t||-1===r.indexOf(t))return(0,s.consoleError)("Invalid Cohesion event name: "+t);if("function"!=typeof e)return(0,s.consoleError)("Invalid Cohesion event handler for "+t,e);if(d[t])try{e.apply(e,d[t])}catch(e){return(0,s.consoleError)("Event handler for "+t+" failed",e)}(u[t]=u[t]||[]).push(e)}e.emit=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[0],r=t.slice(1),i=u[o]||[];d[o]=r;for(var a=0;i[a];a++)try{i[a].apply(i[a],r)}catch(e){(0,s.consoleError)(e)}};for(var t=0;o.q&&t<o.q.length;t++){var n=o.q[t];e(n[0],n[1])}return e};var s=e("../../utils"),o=window[window._Cohesion.k],r=["ready","preamp:decisionsReceived","preamp:done","preamp:error","fuse:leasesReceived","fuse:error","fuse:done","tagular:initialized","tagular:ready","tagular:newSession","tagular:contextCreated","tagular:eventSent"],u={},d={}},{"../../utils":27}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.cohesion,n=e.tagular;if(!window._Cohesion.physicalPageViewed){window._Cohesion.physicalPageViewed=!0;var o={"@type":"redventures.usertracking.v2.PageViewed",pageName:document.title,newAnonymousId:window._Tagular.newAnonymousId};window.performance&&window.performance.timing&&(o.performance=(0,i.default)(["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"],window.performance.timing)),n("beam","Page Viewed",o),n("setupEngagementTracking"),t.emit("ready")}};var o,r=e("../../utils/object"),i=(o=r)&&o.__esModule?o:{default:o}},{"../../utils/object":28}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){if(localStorage.getItem("cohesion_disable"))throw new Error("Cohesion has been disabled");_Cohesion.cookieTtl&&(_Cohesion.cookieExpiry=(0,o.fetchCookie)("cohsn_cookie_expiry"),_Cohesion.cookieExpiry||(_Cohesion.cookieExpiry=new Date((new Date).getTime()+_Cohesion.cookieTtl).toGMTString(),(0,o.setCookie)("cohsn_cookie_expiry",_Cohesion.cookieExpiry)));var e={tagularApiHost:window._Cohesion.tagular.apiHost};window._Cohesion.tagular.apiKey?(e.tagularApiKey=window._Cohesion.tagular.apiKey,window._Cohesion.tagular.writeKey?(e.tagularWriteKey=window._Cohesion.tagular.writeKey,e.tagularSourceKey=window._Cohesion.tagular.sourceKey):e.tagularWriteKey=window._Cohesion.tagular.apiKey):window._Cohesion.tagular.sourceKey?window._Cohesion.tagular.writeKey?(e.tagularApiKey=window._Cohesion.tagular.sourceKey,e.tagularWriteKey=window._Cohesion.tagular.writeKey,e.tagularSourceKey=window._Cohesion.tagular.sourceKey):(0,o.consoleError)("Invalid Tagular configuration - A writeKey must be provided"):(0,o.consoleError)("Invalid Tagular configuration - A tenantId or sourceKey must be provided");return e};var o=e("../../utils")},{"../../utils":27}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(a){var e=a.cohesion,s=a.globalConfig,u=a.tagular;e("ready",function(){for(var e=["_fbc","_fbp","_ga"],t=0;t<e.length;t++){var n=(0,o.fetchCookie)(e[t]);n&&u("beam",{"@type":"redventures.browser.v1alpha.CookieIdentified",key:e[t],value:n})}}),"function"==typeof window.addEventListener&&window.performance&&window.performance.timing&&window.addEventListener("load",function(){u("beam","Dom Completed",{"@type":"redventures.browser.v1alpha2.DomCompleted",performance:(0,r.default)(["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"],window.performance.timing)})});e("tagular:contextCreated",function(){var e=window._Tagular.webContext;window._Cohesion.sessionId=e.sessionId,window._Cohesion.instanceId=e.instanceId,window._Cohesion.webContext=e}),e("tagular:ready",function(){var e=RegExp(/_amp_linker=([^&#]*)/).exec(window.location.search);if(e)for(var t=decodeURIComponent(e[1]).split("*"),n=2;n<t.length;n+=2){var o=t[n];if("id"===o){var r=t[n+1],i=atob(r.replace(/_/g,"/").replace(/-/g,"+").replace(/\./g,"="));u("beam",{"@type":"redventures.usertracking.v1.PartnerAliasCaptured",aliasName:"amp_client_id",value:i});break}}window._Cohesion.anonymousId=window._Tagular.webContext.anonymousId,s.preamp.enabled&&window._Cohesion.preamp&&!window._Preamp.errored||(0,d.default)(a)})};var d=i(e("./ready")),o=e("../../utils"),r=i(e("../../utils/object"));function i(e){return e&&e.__esModule?e:{default:e}}},{"../../utils":27,"../../utils/object":28,"./ready":4}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t={};return t.globalConfig=e,t.cohesion=window[window._Cohesion.k],t.tagular=o.default,t.config=(0,r.default)(),t};var o=i(e("../tagular")),r=i(e("./setup-configs"));function i(e){return e&&e.__esModule?e:{default:e}}},{"../tagular":20,"./setup-configs":5}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.config,n=e.cohesion,o=t.tagularSourceKey,r={};_Tagular&&_Tagular.config&&_Tagular.config.taggy&&(r=_Tagular.config.taggy);if(!o)return!1;if(!0!==r.enabled)return!1;n("tagular:ready",function(){window.opener&&(window.addEventListener("message",function(e){var t=e.data,n=t.taggy,o=t.token,r=t.env,i=d.includes(e.origin),a=i&&n&&o&&!document.getElementById("taggy-script");if(a){localStorage.setItem("taggyjwt",o);var s=document.createElement("script");s.setAttribute("src",(l[r]||l.PROD)+"/taggy/taggy-app.min.js"),s.setAttribute("type","application/javascript"),s.setAttribute("id","taggy-script"),document.body.appendChild(s);var u=document.createElement("taggy-app");document.body.appendChild(u)}}),window.opener.postMessage({taggy:o},"*")),(0,i.default)("registerEvents",o)})};var o,r=e("../taggy"),i=(o=r)&&o.__esModule?o:{default:o};var d=["http://localhost:8050","https://admin.preamp.io","https://admin-staging.preamp.io"],l={LOCAL:"http://localhost:1234",DEV:"https://clients.development.taggy.cohesionapps.com",STAGING:"https://clients.staging.taggy.cohesionapps.com",PROD:"https://clients.taggy.cohesionapps.com"}},{"../taggy":12}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.config,n=e.tagular,o=window._Cohesion.tagular;o.apiKey=t.tagularApiKey,o.sourceKey=t.tagularSourceKey,o.writeKey=t.tagularWriteKey,o.apiHost=t.tagularApiHost,o.apiKey&&-1!==o.apiKey.indexOf(".")?window._Cohesion.tenantId=o.apiKey.substr(0,o.apiKey.indexOf(".")):window._Cohesion.tenantId=o.apiKey;o.writeKey&&-1!==o.writeKey.indexOf(".")?(window._Cohesion.writeKey=o.writeKey.substr(0,o.writeKey.indexOf(".")),o.writeKey=window._Cohesion.writeKey):window._Cohesion.writeKey=o.writeKey;o.sourceKey&&(window._Cohesion.sourceKey=o.sourceKey);n("initialize",o),n("setupEngagementTracking")}},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=e("./events"),i=(o=r)&&o.__esModule?o:{default:o};n.default={registerEvents:i.default}},{"./events":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){w.sourceKey||(w.sourceKey=e,w.unsubscribe=(0,o.default)(document.body,s))};var u=e("../../utils"),d=r(e("../tagular")),o=r(e("./observer"));function r(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var w={implementations:[],unsubscribe:null};function i(e,t){var n=!0,o=!1,r=void 0;try{for(var i,a=function(){var e=i.value,n=JSON.parse(JSON.stringify(t.makeSchema.payload));n["@type"]=t.makeSchema.name,e.addEventListener("click",function(e){var t=function(e,t){var n={tagName:"{{elementTagName}}",id:"{{elementId}}",innerText:"{{elementInnerText}}",href:"{{elementHref}}",location:"{{windowLocation}}",uuid:"{{UUID}}"},o=JSON.stringify(e);for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=new RegExp(n[r],"g");switch(n[r]){case n.tagName:o=o.replace(i,t.tagName);break;case n.id:o=o.replace(i,t.id);break;case n.innerText:o=o.replace(i,t.innerText?t.innerText:"");break;case n.href:o=o.replace(i,t.href?t.href:"");break;case n.location:o=o.replace(i,window.location.href);break;case n.uuid:for(;-1!==o.indexOf(n.uuid);)o=o.replace(new RegExp(n[r]),(0,u.generateUUID)())}}return JSON.parse(o)}(n,e.target);(0,d.default)("beam",t,!0,!0)})},s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)a()}catch(e){o=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}}function a(e){if(w.implementations&&Array.isArray(w.implementations)){var t=!0,n=!1,o=void 0;try{for(var r,i=w.implementations[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value,s=a.target;if(s.selector){for(var u=[],d=document.querySelectorAll(s.selector),l=0;l<d.length;l++){var c=d[l],f=a.matchedElements&&a.matchedElements.includes(c),g=s.innerText&&s.innerText===c.innerText||!s.innerText;!f&&g&&u.push(c)}a.matchedElements=a.matchedElements?[].concat(p(a.matchedElements),u):u,e(u,a)}}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}}function s(){var e,t,n;w.location!==window.location.href?(w.location=window.location.href,e=w.sourceKey,t=function(e){Array.isArray(e)&&e.length&&(w.implementations=e,a(function(e,t){i(e,t)}))},(n=new XMLHttpRequest).open("GET","https://taggy.cohesionapps.com/implementations/public",!0),n.setRequestHeader("Source-Key",e),n.setRequestHeader("Page-URL",window.location.href),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.responseType="json",n.onload=function(){200===n.status?t(n.response):w.unsubscribe&&w.unsubscribe()},n.send()):a(function(e,t){i(e,t)})}},{"../../utils":27,"../tagular":20,"./observer":13}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=e("./api"),i=(o=r)&&o.__esModule?o:{default:o},a=e("../../utils");n.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[0];if(o){var r=t.slice(1);return i.default[o].apply(this,r)}(0,a.consoleError)("Invalid method - "+t[0])}},{"../../utils":27,"./api":10}],13:[function(e,t,n){"use strict";function o(e,t){this.el=e,this.cb=t,this.interval=setInterval(function(){this.html!==this.el.innerHTML&&(this.cb(),this.html=this.el.innerHTML)}.bind(this),200),o.prototype.terminate=function(){clearInterval(this.interval)}.bind(this)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return new o(e,t).terminate}},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getAliasSet=u,n.setAliasQuery=function(e){var t=u();try{for(var n=document.querySelectorAll(e),o=0;o<n.length;o++){var r=n[o];if("A"===r.nodeName){var i=r.href.match(/\?\S+/),a="ref_anon="+t.anonymousId+"&ref_inst="+t.instanceId+"&ref_sess="+t.sessionId+"&ref_tenant="+t.tenantId+"&transit_id="+t.transitId;r.href+=i?"&"+a:"?"+a}}}catch(e){(0,s.consoleError)("Invalid query for aliasing - "+e)}};var s=e("../../utils");function u(){var e=_Cohesion,t=e.anonymousId,n=e.instanceId,o=e.sessionId,r=e.tenantId;return{anonymousId:t,instanceId:n,sessionId:o,transitId:e.transitId,tenantId:r}}},{"../../utils":27}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("./beam"),r=e("./session"),i=c(e("./emitter")),a=c(e("./events")),s=c(e("./initialize")),u=c(e("./pageView")),d=c(e("./setAuthId")),l=e("./alias");function c(e){return e&&e.__esModule?e:{default:e}}n.default={beam:o.beam,deleteSession:r.deleteSession,setupEngagementTracking:a.default,initialize:s.default,on:i.default,pageView:u.default,setAuthId:d.default,getAliasSet:l.getAliasSet,setAliasQuery:l.setAliasQuery}},{"./alias":14,"./beam":16,"./emitter":18,"./events":19,"./initialize":21,"./pageView":22,"./session":23,"./setAuthId":24}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};n.formPayload=m,n.beam=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t;"string"==typeof t[0]&&(o=t.splice(1));var r=f(o,3),i=r[0],a=r[1],s=r[2];!function(e){if(_Tagular.config.beamHook&&"function"==typeof _Tagular.config.beamHook)try{_Tagular.config.beamHook.apply(null,e)}catch(e){(0,g.consoleError)("beam hook function failed: ",e)}}([c({},i)]);var u=m(i,s);if(!_Tagular.config.suppressBeam){var d=_Tagular.config.apiHost||"https://make.cohesionapps.com/v1/t",l={Authorization:"Basic "+window.btoa(_Tagular.config.writeKey+":")};(0,p.postJSON)(d,u,l)}window[window._Cohesion.k].emit("tagular:eventSent",u),a&&(0,w.renewSession)()};var g=e("../../utils"),p=e("../../utils/ajax"),w=e("./session");function m(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=e["@type"],o=_Tagular.webContext,r=o.anonymousId,i=o.sessionId,a=o.instanceId,s=o.manualInstanceId,u=o.fromManual,d=o.page,l=o.authenticatedUserId;t&&_Tagular.config.writeKey&&!e.webContext&&(e.webContext=_Tagular.webContext);var c={context:{sessionId:i,instanceId:a,manualInstanceId:s,fromManual:u,page:d,userAgent:navigator.userAgent,library:{name:"analytics.js"}},event:n,properties:e,anonymousId:r,timestamp:(new Date).toISOString(),writeKey:_Tagular.config.apiKey,sentAt:(new Date).toISOString(),messageId:(0,g.generateUUID)()};return l&&(c.context.authenticatedUserId=l),delete c.properties["@type"],(0,g.scrubInvalids)(c)}_Tagular.universalCB=function(e){return e.success?e:(0,g.consoleError)(e)}},{"../../utils":27,"../../utils/ajax":26,"./session":23}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=(0,a.fetchCookie)("tglr_anon_id"),o=(0,a.fetchCookie)("tglr_tenant_id"),r=null;_Tagular.webContext&&(r=_Tagular.webContext.instanceId);_Tagular.webContext={page:{referrer:document.referrer,title:document.title,url:window.location.href},userAgent:navigator.userAgent},_Tagular.newAnonymousId=n?(_Tagular.webContext.anonymousId=n,!1):(_Tagular.webContext.anonymousId=(0,a.generateUUID)(),!0);_Tagular.webContext.instanceId=r||(0,a.generateUUID)(),_Tagular.webContext.fromManual=t?(_Tagular.webContext.manualInstanceId=(0,a.generateUUID)(),!0):(_Tagular.webContext.manualInstanceId=null,!1);if(_Tagular.config.authCookie&&"string"==typeof _Tagular.config.authCookie){var i=(0,a.fetchCookie)(_Tagular.config.authCookie);"string"!=typeof i?(0,a.consoleError)("Invalid auth cookie value"):_Tagular.webContext.authenticatedUserId=i}o||(0,a.setCookie)("tglr_tenant_id",_Cohesion.tenantId,_Tagular.config.cookieDomain,63072e6);_Tagular.webContext.sessionId=(0,s.renewSession)(e),window[window._Cohesion.k].emit("tagular:contextCreated")};var a=e("../../utils"),s=e("./session")},{"../../utils":27,"./session":23}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){window[window._Cohesion.k]("tagular:"+e,t)}},{}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){(function(){var e=null,t=null;void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange");document.addEventListener(t,function(){document[e]?c():g()},!1)})(),window.addEventListener("blur",c),window.addEventListener("focus",g),document.addEventListener("mousemove",g),document.addEventListener("keyup",g),document.addEventListener("touchstart",g),window.addEventListener("scroll",w),window.addEventListener("beforeunload",p),window.addEventListener("pagehide",p),f(),a=setTimeout(c,15e3)};var s=e("./beam"),r=(new Date).getTime(),i=0,o=0,a=null,u=!1,d=0,l=[];function c(){if(u)return!1;u=!0;var e=(new Date).getTime();0===o&&(o=(new Date).getTime());var t=e-o;clearTimeout(a),i+=t,o=0}function f(){u=!1,o=(new Date).getTime()}function g(){o||f(),clearTimeout(a),a=setTimeout(c,15e3)}function p(){if(!_Tagular.engagementSent){_Tagular.engagementSent=!0,c();var e={"@type":"redventures.usertracking.v3.PageEngaged",engagementDuration:i,totalDuration:(new Date).getTime()-r};if(_Cohesion.tagular&&!_Cohesion.tagular.suppressBeam){var t=_Tagular.config.apiHost||"https://make.cohesionapps.com/v1/t",n=(0,s.formPayload)(e);if(navigator&&navigator.sendBeacon)return n=JSON.stringify(n),navigator.sendBeacon(t+"?k="+window.btoa(_Tagular.config.writeKey),n);n=encodeURIComponent(JSON.stringify(n));var o=new XMLHttpRequest;o.open("GET",t+"?data="+n,!1),o.setRequestHeader("Authorization","Basic "+window.btoa(_Tagular.config.writeKey+":")),o.send(null)}else(0,s.beam)(e)}}function w(){g();var e=document,t=e.body,n=e.documentElement,o=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),r=window.innerHeight||n.clientHeight,i=(t.scrollTop||n.scrollTop)+r,a=25*Math.floor(i/o*100/25);a!==d&&-1===l.indexOf(a)&&(d=a,l.push(d),(0,s.beam)({"@type":"redventures.usertracking.v3.PageScrolled",scrollDistance:d}))}},{"./beam":16}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=e("./api"),i=(o=r)&&o.__esModule?o:{default:o},a=e("../../utils");function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(i.default[t[0]]){var o=t.slice(1);return i.default[t[0]].apply(this,o)}(0,a.consoleError)("Invalid method - "+t[0])}window._Tagular.clientVersion="6.0.0b",window[window._Tagular.k].q=window[window._Tagular.k].q||[],window[window._Cohesion.k]("tagular:ready",function(){window._Tagular.q.forEach(function(e){s.apply(this,e)}),delete window._Tagular.q}),window._Tagular.q=window[window._Tagular.k].q,window[window._Cohesion.k]("tagular:initialized",function(){window[window._Tagular.k]=s});var u=s;n.default=u},{"../../utils":27,"./api":15}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){_Tagular.config=e,window[window._Cohesion.k].emit("tagular:initialized"),(0,i.default)(!0),(0,a.setCookie)("tglr_anon_id",_Tagular.webContext.anonymousId,_Tagular.config.cookieDomain,63072e6);var t=(0,a.parseQuery)(window.location.href);t.transit_id&&(0,s.beam)({"@type":"redventures.usertracking.v3.TransitIdTracked",correlationId:t.correlation_id,referrerAnon:t.ref_anon,referrerInstance:t.ref_inst,referrerSession:t.ref_sess,referrerTenant:t.ref_tenant,transitId:t.transit_id});window[window._Cohesion.k].emit("tagular:ready")};var o,r=e("./context"),i=(o=r)&&o.__esModule?o:{default:o},a=e("../../utils"),s=e("./beam")},{"../../utils":27,"./beam":16,"./context":17}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e&&(0,i.default)(e);(0,r.default)(!1,!0);var t={"@type":"redventures.usertracking.v2.PageViewed",pageName:document.title,newAnonymousId:window._Tagular.newAnonymousId};window.performance&&window.performance.timing&&(t.performance=(0,a.default)(["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"],window.performance.timing));(0,o.beam)(t)};var o=e("./beam"),r=s(e("./context")),i=s(e("./setVirtualReferrer")),a=s(e("../../utils/object"));function s(e){return e&&e.__esModule?e:{default:e}}},{"../../utils/object":28,"./beam":16,"./context":17,"./setVirtualReferrer":25}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.renewSession=n.deleteSession=void 0;var d=e("../../utils"),a=e("./beam"),r="tglr_sess_id",l=(0,d.fetchCookie)("tglr_req"),c=(0,d.fetchCookie)("tglr_ref");function i(e,t,n,o){var r=_Tagular.config.sessionLength||18e5;if(_Tagular.config.multiparty){var i=(0,d.fetchCookie)("tglr_transit_id");if(i)window._Cohesion.transitId=i;else i=(0,d.parseQuery)(window.location.href).transit_id||(0,d.generateUUID)(),window._Cohesion.transitId=i,(0,d.setCookie)("tglr_transit_id",i,_Tagular.config.cookieDomain,r),(0,a.beam)({"@type":"redventures.usertracking.v3.TransitIdCreated",transitId:i})}(0,d.setCookie)("tglr_sess_id",o,_Tagular.config.cookieDomain,r),(0,d.setCookie)("tglr_sess_count",n,_Tagular.config.cookieDomain,63072e6),(0,d.setCookie)("tglr_req",e,_Tagular.config.cookieDomain,r),(0,d.setCookie)("tglr_ref",t,_Tagular.config.cookieDomain,r)}n.deleteSession=function(){(0,d.deleteCookie)(r)},n.renewSession=function(e){var t=(0,d.fetchCookie)(r),n=+(0,d.fetchCookie)("tglr_sess_count"),o=!0;return(0,d.fetchCookie)("tglr_tenant_id")!==_Cohesion.tenantId&&(o=!1,(0,d.setCookie)("tglr_tenant_id",_Cohesion.tenantId,_Tagular.config.cookieDomain,63072e6)),n||(n=0),!t||e&&function(e){var t=(0,d.fetchCookie)("tglr_virtual_ref"),n=void 0;if(t){var o=t.split(":"),r="",i="";if(o[0]&&(r=decodeURIComponent(o[0])),o[1]&&(i=o[1]),e!==i)return!0;n=(0,d.parseUrl)(r).hostname}else n=(0,d.parseUrl)(document.referrer).hostname;if(!document.referrer)return!1;if(window.location.hostname===n)return!1;var a=_Tagular.config.domainWhitelist;if(Array.isArray(a))for(var s=0;s<a.length;s++)if(n.indexOf(a[s])===n.length-a[s].length)return!1;var u=c&&-1!==/^\S+:\/\//.test(c)?(0,d.parseUrl)(c).hostname:c;return""+decodeURIComponent(window.location.href)+n!=""+l+u}(t)||!o?(t=(0,d.generateUUID)(),n+=1,_Tagular.webContext.sessionId=t,(0,a.beam)({"@type":"redventures.usertracking.v2.SessionStarted",sessionCount:n},!1),i(window.location.href,document.referrer,n,t),window[window._Cohesion.k].emit("tagular:newSession")):i((0,d.fetchCookie)("tglr_req"),(0,d.fetchCookie)("tglr_ref"),n,t),t}},{"../../utils":27,"./beam":16}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if("string"!=typeof e)return(0,o.consoleError)("Invalid Id provided to setAuthId - "+e);_Tagular.webContext.authenticatedUserId=e,window[window._Cohesion.k].emit("tagular:contextCreated")};var o=e("../../utils")},{"../../utils":27}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=(0,o.fetchCookie)("tglr_sess_id");(0,o.setCookie)("tglr_virtual_ref",encodeURIComponent(e)+":"+t,_Tagular.config.cookieDomain,36e5)};var o=e("../../utils")},{"../../utils":27}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};n.generateJSONP=l,n.attachFuseData=function(e){var t=window._Fuse,n=t.requestId,o=t.clientVersion,r=t.deviceId,i=t.user;return f(c({},e,{requestId:n,clientVersion:o,deviceId:r,user:i}))},n.get=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];window._Fuse.currentCB=n||function(){},u(window._Fuse.endpoint+"/"+e,{method:"GET",libName:"_Fuse",data:t,credentials:!1},window._Fuse.currentCB)},n.post=function(e,t,n,o,r){window._Preamp.currentCB=r||function(){};var i=window._Preamp.endpoint+"/"+e,a=function(e,t){var n=window._Preamp,o=n.requestId,r=void 0===o?"":o,i=n.clientVersion,a=void 0===i?"":i,s=n.clientId,u=void 0===s?"":s,d=f(c({},e,{requestId:r,clientVersion:a,clientId:u}),t);if(window._Preamp.preview){var l=window._Preamp.preview.split(":")[0];-1===d.webContext.page.url.indexOf(l)&&(d.webContext.page.url+=-1===d.webContext.page.url.indexOf("?")?"?"+l:"&"+l)}return d}(t,n);u(i,{method:"POST",libName:"_Preamp",data:a||{},credentials:o},window._Preamp.currentCB)},n.postJSON=function(e,t,n){"object"!==(void 0===t?"undefined":a(t))&&(0,s.consoleError)("error: Invalid payload:  Not an Object for "+e);var o=JSON.stringify(t),r=new XMLHttpRequest;if(r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&(0,s.consoleError)({error:r.status+" for "+e+": "+r.responseText})},r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n&&"object"===(void 0===n?"undefined":a(n)))for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&r.setRequestHeader(i,n[i]);r.send(o)};var s=e("./index");function l(e,t,n){var o=document.createElement("script");o.src=e+"?m="+t+"&callback="+n+".currentCB",document.getElementsByTagName("head")[0].appendChild(o)}function f(e,t){var n=t||window._Tagular.webContext,o=n.anonymousId,r=n.sessionId,i=n.instanceId;return c({},e,{anonymousId:o,sessionId:r,instanceId:i,tenantId:_Cohesion.tenantId,writeKey:_Cohesion.writeKey,webContext:window._Tagular.webContext})}function u(e,t,n){var o=t.method,r=t.data,i=t.credentials,a=t.libName,s=encodeURIComponent(JSON.stringify(r)),u=new XMLHttpRequest;if("withCredentials"in u){i&&(u.withCredentials=!0),u.onreadystatechange=function(){4===u.readyState&&(200===u.status?n(null,JSON.parse(u.response||"{}")):0===u.status?l(e,s,a):204!==u.status&&n({error:"Unknown error status code:"+u.status+" for "+e}))};var d=s.length<7500?"?m="+s:"";u.open(o,s?""+e+d:e,!0),"POST"===o?(u.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),u.send("m="+s)):u.send()}else l(e,s,a)}},{"./index":27}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function r(e){return setTimeout(e,5)}function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:window.document.domain,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:63072e6,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"Lax",i=_Cohesion.cookiePrefix?_Cohesion.cookiePrefix+"_"+e:e,a=0;a=window._Cohesion&&window._Cohesion.cookieExpiry?window._Cohesion.cookieExpiry:"expire"===o?"Thu, 01 Jan 1970 00:00:00 GMT":new Date((new Date).getTime()+o).toGMTString(),document.cookie=i+"="+t+"; expires="+a+"; path=/; domain="+n+"; SameSite="+r+("https:"===window.location.protocol?"; secure":"")}function d(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||window.location.host,hash:t.hash,hostname:t.hostname||window.location.hostname,pathname:"/"!==t.pathname.charAt(0)?"/"+t.pathname:t.pathname,protocol:t.protocol&&":"!==t.protocol?t.protocol:window.location.protocol,search:t.search,query:t.search.slice(1)}}function a(e){return!(null!=e&&NaN!==e)}function s(e){return Array.isArray(e)?function(e){for(var t=e.length,n=0;n<t;n++){var o=e[n];a(o)?(e.splice(n,1),t-=1,n-=1):s(o)}return e}(e):"object"===(void 0===e?"undefined":o(e))?function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];a(n)?delete e[t]:s(n)}return e}(e):e}n.generateUUID=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},n.delay=r,n.setLocalStorage=function(e,t){try{localStorage.setItem(e,t)}catch(e){return!1}},n.setSessionStorage=function(e,t){try{sessionStorage.setItem(e,t)}catch(e){return!1}},n.fetchCookie=function(e){var t=_Cohesion.cookiePrefix?_Cohesion.cookiePrefix+"_"+e:e,n=new RegExp(t+"=([^;]+)").exec(document.cookie);return null!=n?unescape(n[1]):null},n.setCookie=i,n.deleteCookie=function(e){i(_Cohesion.cookiePrefix?_Cohesion.cookiePrefix+"_"+e:e,"",void 0,"expire")},n.clearHidden=function e(){if(_Preamp.docReady){var t=document.documentElement.className;document.documentElement.className=t.replace(/preampjs/g,"")}else r(e)},n.emit=function(e,t){window._Cohesion&&window._Cohesion.k&&window[window._Cohesion.k].emit(e,t)},n.consoleError=function(e,t){window.console&&window.console.error&&window.console.error(e,t)},n.consoleLog=function(e,t){window.console&&window.console.log&&window.console.log(e,t)},n.parseUrl=d,n.parseQuery=function(e){for(var t=d(e).query.split("&"),n={},o=0;o<t.length;o++)if("string"==typeof t[o]){var r=t[o].split("="),i=u(r,2),a=i[0],s=i[1];n[a]=s}return n},n.scrubInvalids=s},{}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=function(e,t){if(!Array.isArray(e)||"object"!==(void 0===t?"undefined":r(t)))return{};for(var n={},o=0;o<e.length;o++)t[e[o]]&&(n[e[o]]=t[e[o]]);return n}},{}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,r=e("../../../package.json");var i={preamp:{enabled:!1},fuse:{enabled:!1},clientVersion:"1.0.0",coreVersion:((o=r)&&o.__esModule?o:{default:o}).default.version};n.default=i},{"../../../package.json":1}],30:[function(e,t,n){"use strict";var o=c(e("./config")),r=e("../../utils"),i=c(e("../../libs/cohesion/emitter")),a=c(e("../../libs/cohesion/tagular-init")),s=c(e("../../libs/cohesion/setup-events")),u=c(e("../../libs/cohesion/cross-site")),d=c(e("../../libs/cohesion/setup-locals")),l=c(e("../../libs/cohesion/taggy"));function c(e){return e&&e.__esModule?e:{default:e}}window._Cohesion.physicalPageViewed=!1,window.__Cohesion&&window.__Cohesion.initialized?(0,r.consoleError)("Cohesion was previously initialized, please check for duplicate inclusions of the library"):(window.__Cohesion={initialized:!0},function(){try{window[window._Cohesion.k]=(0,i.default)();var e=(0,d.default)(o.default);window._Cohesion.clientVersion=e.globalConfig.clientVersion,window._Cohesion.coreVersion=e.globalConfig.coreVersion,(0,s.default)(e),(0,a.default)(e),(0,l.default)(e),(0,u.default)(e)}catch(e){(0,r.consoleError)(e.message)}}())},{"../../libs/cohesion/cross-site":2,"../../libs/cohesion/emitter":3,"../../libs/cohesion/setup-events":6,"../../libs/cohesion/setup-locals":7,"../../libs/cohesion/taggy":8,"../../libs/cohesion/tagular-init":9,"../../utils":27,"./config":29}]},{},[30]);